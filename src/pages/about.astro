---
export const prerender = false

import { getCollection } from 'astro:content'
import { resolveLayout } from '@lib/theme-resolver'
import ThemeSwitcher from '@components/shared/ThemeSwitcher.astro'
import { siteConfig } from '@lib/site-config'

const themeId = Astro.locals.theme
const Layout = resolveLayout(themeId)

const team = await getCollection('team')
const sortedTeam = team.sort((a, b) => a.data.displayOrder - b.data.displayOrder)
---

<Layout
  title="About Us"
  description="Meet the team behind CleanSpark — Seattle's trusted cleaning service since 2019."
>
  <ThemeSwitcher currentTheme={themeId} />

  <main data-page="about">
    <section data-section="page-hero" style="padding: var(--section-padding) 1rem; text-align: center;">
      <div style={`max-width: var(--container-max); margin: 0 auto;`}>
        <h1 style="font-family: var(--font-heading); font-size: 2.5rem; color: var(--color-primary); margin-bottom: 0.5rem;">
          About CleanSpark
        </h1>
        <p style="color: var(--color-text-muted); font-size: 1.125rem; max-width: 600px; margin: 0 auto;">
          Seattle's trusted cleaning experts since 2019.
        </p>
      </div>
    </section>

    <section data-section="story" style="padding: 3rem 1rem;">
      <div style={`max-width: var(--container-max); margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; align-items: start;`}>
        <div>
          <h2 style="font-family: var(--font-heading); font-size: 1.75rem; color: var(--color-primary); margin-bottom: 1rem;">
            Our Story
          </h2>
          <p style="color: var(--color-text); line-height: 1.7; margin-bottom: 1rem;">
            CleanSpark was born from a simple belief: everyone deserves a clean, healthy space — and every cleaner deserves fair pay and respect. Founded in 2019, we started as a one-person operation in a Seattle studio apartment with a vacuum, a bucket, and a vision.
          </p>
          <p style="color: var(--color-text); line-height: 1.7;">
            Today, we're a team of dedicated professionals serving homes and businesses across the greater Seattle area. We've completed over 5,000 cleans, maintained a 4.9-star rating, and built something we're truly proud of.
          </p>
        </div>
        <div>
          <h2 style="font-family: var(--font-heading); font-size: 1.75rem; color: var(--color-primary); margin-bottom: 1rem;">
            Our Values
          </h2>
          <ul style="list-style: none; padding: 0;">
            {[
              { title: 'Quality First', desc: 'We never cut corners. Every surface, every room, every time.' },
              { title: 'Fair & Transparent', desc: 'No hidden fees. Fair wages for our team. Honest pricing for our clients.' },
              { title: 'Eco-Conscious', desc: 'Green cleaning products and sustainable practices as standard.' },
              { title: 'Reliable', desc: 'On time, every time. Consistent results you can count on.' },
            ].map((value) => (
              <li style="margin-bottom: 1rem;">
                <strong style="color: var(--color-primary); font-family: var(--font-heading);">{value.title}</strong>
                <p style="color: var(--color-text-muted); font-size: 0.9375rem; margin-top: 0.25rem;">{value.desc}</p>
              </li>
            ))}
          </ul>
        </div>
      </div>
    </section>

    <section data-section="team" style="padding: var(--section-padding) 1rem; background: var(--color-surface);">
      <div style={`max-width: var(--container-max); margin: 0 auto;`}>
        <h2 style="font-family: var(--font-heading); font-size: 1.75rem; color: var(--color-primary); margin-bottom: 2rem; text-align: center;">
          Meet Our Team
        </h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 2rem;">
          {sortedTeam.map((member) => (
            <article
              data-member={member.data.id}
              style={`background: var(--color-background); border-radius: var(--radius-lg); padding: 1.5rem; text-align: center;`}
            >
              <div
                style={`width: 96px; height: 96px; border-radius: var(--radius-full); background: color-mix(in srgb, var(--color-primary) 15%, transparent); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: var(--color-primary);`}
                aria-hidden="true"
              >
                {member.data.name.charAt(0)}
              </div>
              <h3 style="font-family: var(--font-heading); font-size: 1.125rem; color: var(--color-primary); margin-bottom: 0.25rem;">
                {member.data.name}
              </h3>
              <p style="color: var(--color-accent); font-size: 0.875rem; font-weight: 600; margin-bottom: 0.75rem;">
                {member.data.role}
              </p>
              <p style="color: var(--color-text-muted); font-size: 0.875rem; line-height: 1.6;">
                {member.data.bio.length > 200 ? member.data.bio.slice(0, 200) + '...' : member.data.bio}
              </p>
              {member.data.certifications && member.data.certifications.length > 0 && (
                <div style="margin-top: 0.75rem; display: flex; flex-wrap: wrap; gap: 0.375rem; justify-content: center;">
                  {member.data.certifications.map((cert) => (
                    <span style={`font-size: 0.75rem; padding: 0.25rem 0.5rem; background: color-mix(in srgb, var(--color-primary) 10%, transparent); border-radius: var(--radius-full); color: var(--color-primary);`}>
                      {cert}
                    </span>
                  ))}
                </div>
              )}
            </article>
          ))}
        </div>
      </div>
    </section>

    <section data-section="service-areas" style="padding: 3rem 1rem; text-align: center;">
      <div style={`max-width: var(--container-max); margin: 0 auto;`}>
        <h2 style="font-family: var(--font-heading); font-size: 1.75rem; color: var(--color-primary); margin-bottom: 1rem;">
          Proudly Serving
        </h2>
        <p style="color: var(--color-text-muted); font-size: 1.0625rem;">
          {siteConfig.serviceAreas.join(' \u00B7 ')}
        </p>
      </div>
    </section>
  </main>
</Layout>
